import{d as Ce,f as x,a as c,s as V}from"../chunks/DArtHkHk.js";import{o as qe}from"../chunks/B2Vnf32q.js";import{p as Fe,s as i,a as Le,u as Ne,g as e,b as o,c as t,d,e as He,h as pe,r,n as k,f as W,t as X}from"../chunks/BjbBlfYJ.js";import{i as xe,a as Je,b as Ke}from"../chunks/DL2-Z6ex.js";import{t as w,u as Qe,r as I,e as fe,s as ye,i as he}from"../chunks/LlG9SSuv.js";import{b as p,t as Y,a as Re}from"../chunks/zHiRsLaD.js";import{p as Ue}from"../chunks/C6Z-BH3f.js";import{g as M}from"../chunks/C2HQg65W.js";import{a as Ve}from"../chunks/DRZLMWTu.js";import{A as We,S as Xe,T as Ye,g as Ze}from"../chunks/DAaTc6sE.js";import{T as er}from"../chunks/BzmJ6XsI.js";const rr=!1,tr=!1,hr=Object.freeze(Object.defineProperty({__proto__:null,prerender:rr,ssr:tr},Symbol.toStringTag,{value:"Module"}));var ar=x("<div> </div>"),dr=x("<div> </div>"),or=x('<div class="grid grid-cols-2 gap-4"><div><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Original</h3> <div class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded p-3 font-mono text-xs overflow-auto max-h-96 text-gray-900 dark:text-gray-100"></div></div> <div><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Transformed</h3> <div class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded p-3 font-mono text-xs overflow-auto max-h-96 text-gray-900 dark:text-gray-100"></div></div></div>'),sr=x('<div class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded p-4 font-mono text-sm whitespace-pre-wrap overflow-auto max-h-96 text-gray-900 dark:text-gray-100"> </div>'),ir=x('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Preview Output</h2> <label class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"><input type="checkbox" class="rounded"/> Show Diff</label></div> <!></div>'),lr=x('<div class="max-w-7xl mx-auto"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-4"><button class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100" aria-label="Go back"><!></button> <div><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Edit Template</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Modify transformations and test with live preview</p></div></div> <div class="flex items-center gap-2"><button class="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium"><!> Delete</button> <button class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium"><!> Save Changes</button></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"><h2 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Template Information</h2> <div class="space-y-4"><div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Name <span class="text-red-500">*</span></label> <input id="name" type="text" placeholder="e.g., Format Grafana Errors" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100" required/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea id="description" placeholder="Brief description of what this template does..." rows="2" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"></textarea></div> <div><label for="category" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category</label> <input id="category" type="text" placeholder="e.g., Logging, Markdown" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"/></div> <div><label for="tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags (comma-separated)</label> <input id="tags" type="text" placeholder="e.g., grafana, errors, logs" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"/></div> <div><label for="exampleText" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Preview Example Text</label> <textarea id="exampleText" placeholder="e.g., lorem ipsum  dolor sit amet" rows="3" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">This text will be shown in the hover preview on the main page</p></div></div></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"><h2 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Transformations</h2> <!></div></div> <div class="space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"><h2 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Test with Sample Text</h2> <textarea placeholder="Paste sample text here to see live preview..." rows="10" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono text-sm"></textarea></div> <!></div></div></div>');function _r(_e,ke){Fe(ke,!0);const we=()=>Ke(Ue,"$page",Te),[Te,Se]=Je(),O=pe(()=>we().params.id);let s=i(void 0),f=i(""),T=i(""),S=i("General"),$=i(""),D=i(""),n=i(Le([])),b=i(""),m=i(""),z=i(!1);qe(()=>{if(o(s,Y.getById(e(O)),!0),!e(s)){w.error("Template not found"),M("/templates");return}o(f,e(s).name,!0),o(T,e(s).description,!0),o(S,e(s).category||"General",!0),o($,e(s).tags?.join(", ")||"",!0),o(D,e(s).exampleText||"",!0),o(n,[...e(s).transformations],!0)});let y=null;Ne(()=>(e(b).trim()&&e(n).length>0?(y&&clearTimeout(y),y=setTimeout(()=>{try{o(m,Ve(e(b),e(n)),!0)}catch(a){o(m,`Error: ${a.message}`)}},300)):o(m,""),()=>{y&&clearTimeout(y)}));function $e(){if(!e(f).trim()){w.error("Template name is required");return}if(e(n).length===0){w.error("Add at least one transformation");return}const a=e($).split(",").map(v=>v.trim()).filter(v=>v.length>0);Y.update(e(O),{name:e(f).trim(),description:e(T).trim(),category:e(S).trim(),tags:a,exampleText:e(D).trim()||void 0,transformations:e(n)}),w.success("Template updated successfully!"),M("/templates")}function De(){e(s)&&Qe.showModal("Delete Template",`Are you sure you want to delete "${e(s).name}"? This action cannot be undone.`,()=>{Y.delete(e(O)),w.success("Template deleted"),M("/templates")})}function je(){M("/templates")}const A=pe(()=>e(b)&&e(m)?Ze(e(b),e(m)):null);var E=lr(),G=t(E),P=t(G),B=t(P);B.__click=je;var Ie=t(B);We(Ie,{size:24}),r(B),k(2),r(P);var Z=d(P,2),j=t(Z);j.__click=De;var Me=t(j);er(Me,{size:18}),k(),r(j);var C=d(j,2);C.__click=$e;var Oe=t(C);Xe(Oe,{size:18}),k(),r(C),r(Z),r(G);var ee=d(G,2),q=t(ee),F=t(q),re=d(t(F),2),L=t(re),te=d(t(L),2);I(te),r(L);var N=d(L,2),ae=d(t(N),2);W(ae),r(N);var H=d(N,2),de=d(t(H),2);I(de),r(H);var J=d(H,2),oe=d(t(J),2);I(oe),r(J);var se=d(J,2),ie=d(t(se),2);W(ie),k(2),r(se),r(re),r(F);var le=d(F,2),ze=d(t(le),2);Ye(ze,{ontransformationschange:a=>o(n,a,!0),get transformations(){return e(n)},set transformations(a){o(n,a,!0)}}),r(le),r(q);var ne=d(q,2),K=t(ne),ge=d(t(K),2);W(ge),r(K);var Ae=d(K,2);{var Ee=a=>{var v=ir(),Q=t(v),me=d(t(Q),2),ve=t(me);I(ve),k(),r(me),r(Q);var Ge=d(Q,2);{var Pe=g=>{var u=or(),h=t(u),ue=d(t(h),2);fe(ue,21,()=>e(A).original,he,(R,_)=>{var l=ar(),U=t(l,!0);r(l),X(()=>{ye(l,1,`whitespace-pre-wrap ${e(_).type==="removed"?"bg-red-100 dark:bg-red-900/30 text-red-900 dark:text-red-300":""}`),V(U,e(_).content||" ")}),c(R,l)}),r(ue),r(h);var be=d(h,2),ce=d(t(be),2);fe(ce,21,()=>e(A).transformed,he,(R,_)=>{var l=dr(),U=t(l,!0);r(l),X(()=>{ye(l,1,`whitespace-pre-wrap ${e(_).type==="added"?"bg-green-100 dark:bg-green-900/30 text-green-900 dark:text-green-300":""}`),V(U,e(_).content||" ")}),c(R,l)}),r(ce),r(be),r(u),c(g,u)},Be=g=>{var u=sr(),h=t(u,!0);r(u),X(()=>V(h,e(m))),c(g,u)};xe(Ge,g=>{e(z)&&e(A)?g(Pe):g(Be,!1)})}r(v),Re(ve,()=>e(z),g=>o(z,g)),c(a,v)};xe(Ae,a=>{e(m)&&a(Ee)})}r(ne),r(ee),r(E),p(te,()=>e(f),a=>o(f,a)),p(ae,()=>e(T),a=>o(T,a)),p(de,()=>e(S),a=>o(S,a)),p(oe,()=>e($),a=>o($,a)),p(ie,()=>e(D),a=>o(D,a)),p(ge,()=>e(b),a=>o(b,a)),c(_e,E),He(),Se()}Ce(["click"]);export{_r as component,hr as universal};
